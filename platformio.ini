[platformio]
default_envs = esp32dev
src_dir = src
include_dir = include
lib_dir = lib
data_dir = data
build_dir = .pio/build

# ===== ENVIRONNEMENT DÉVELOPPEMENT =====
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
monitor_dtr = 0
monitor_rts = 0
upload_speed = 460800

build_flags = 
    -D DEBUG=1
    -D ENABLE_SERIAL=1
    -O2
    -Wall
    -Wextra

lib_deps = 

# ===== ENVIRONNEMENT PRODUCTION (OPTIMISÉ) =====
[env:esp32dev_release]
extends = esp32dev
build_flags = 
    -D DEBUG=0
    -D ENABLE_SERIAL=0
    -Os
    -flto

# ===== ENVIRONNEMENT TESTS (CI/CD) =====
[env:test]
platform = espressif32
board = esp32dev
framework = arduino
build_flags = 
    -D UNIT_TEST=1
    -D DEBUG=1
